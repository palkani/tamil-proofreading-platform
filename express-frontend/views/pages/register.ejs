<%- include('../partials/header') %>

<!-- Google Client ID for OAuth -->
<input type="hidden" id="google-client-id" value="<%= googleClientId || '' %>">

<div class="min-h-screen bg-gray-50 text-gray-900">
  <div class="absolute top-6 left-6 flex items-center gap-3">
    <a href="/" class="flex items-center gap-2">
      <div class="w-10 h-10 bg-orange-600 rounded-full flex items-center justify-center text-white font-bold">PT</div>
      <span class="text-lg font-semibold">ProofTamil</span>
    </a>
  </div>

  <div class="min-h-screen flex items-center justify-center px-4 py-16">
    <div class="w-full max-w-5xl bg-white shadow-2xl rounded-3xl overflow-hidden grid md:grid-cols-[1.15fr,1fr]">
      <!-- Left side - Benefits -->
      <div class="hidden md:flex flex-col justify-between bg-gray-900 text-white p-10">
        <div class="space-y-6">
          <p class="uppercase tracking-wider text-sm text-gray-400">Free Tamil Writer</p>
          <h2 class="text-4xl font-bold leading-tight">
            Create a ProofTamil account in seconds.
          </h2>
          <p class="text-sm text-gray-300 leading-relaxed">
            ProofTamil offers AI-powered proofreading, real-time Tamil typing, and deep writing analytics. Join thousands of creators crafting flawless Tamil content.
          </p>
        </div>

        <ul class="space-y-4 text-sm text-gray-300">
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-white"></span>
            Instant Tamil transliteration and autocomplete as you type.
          </li>
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-white"></span>
            AI proofreading with grammar, style, and sentence alternatives.
          </li>
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-white"></span>
            Share drafts, revisit history, and collaborate securely.
          </li>
        </ul>
      </div>

      <!-- Right side - Form -->
      <div class="p-8 sm:p-10 space-y-8">
        <!-- Step 1: Registration Form -->
        <div id="registration-step" class="space-y-8">
          <header class="space-y-2">
            <h1 class="text-3xl font-bold">Sign up for ProofTamil</h1>
            <p class="text-sm text-gray-600">
              Create an account in less than a minute.
            </p>
          </header>

          <div id="error-message" class="hidden rounded-xl border border-red-500/40 bg-red-50 px-4 py-3 text-sm text-red-700"></div>

          <form id="register-form" class="space-y-5">
            <div class="space-y-2">
              <label for="name" class="text-sm font-semibold">Full name</label>
              <input id="name" name="name" type="text" required class="input-field" placeholder="e.g. Kavya Raman" />
            </div>

            <div class="space-y-2">
              <label for="email" class="text-sm font-semibold">Email address</label>
              <input id="email" name="email" type="email" required class="input-field" placeholder="you@example.com" />
            </div>

            <div class="space-y-2">
              <label for="password" class="text-sm font-semibold">Password</label>
              <input id="password" name="password" type="password" required minlength="8" class="input-field" placeholder="Minimum 8 characters" />
              
              <!-- Password Strength Indicator -->
              <div id="password-strength" class="hidden mt-2 space-y-2">
                <div class="flex gap-1">
                  <div id="strength-bar-1" class="h-1 flex-1 rounded bg-gray-200"></div>
                  <div id="strength-bar-2" class="h-1 flex-1 rounded bg-gray-200"></div>
                  <div id="strength-bar-3" class="h-1 flex-1 rounded bg-gray-200"></div>
                  <div id="strength-bar-4" class="h-1 flex-1 rounded bg-gray-200"></div>
                  <div id="strength-bar-5" class="h-1 flex-1 rounded bg-gray-200"></div>
                </div>
                <div id="password-requirements" class="text-xs space-y-1">
                  <div id="req-length" class="flex items-center gap-1 text-gray-400">
                    <span class="req-icon">○</span> At least 8 characters
                  </div>
                  <div id="req-upper" class="flex items-center gap-1 text-gray-400">
                    <span class="req-icon">○</span> One uppercase letter
                  </div>
                  <div id="req-lower" class="flex items-center gap-1 text-gray-400">
                    <span class="req-icon">○</span> One lowercase letter
                  </div>
                  <div id="req-number" class="flex items-center gap-1 text-gray-400">
                    <span class="req-icon">○</span> One number
                  </div>
                  <div id="req-special" class="flex items-center gap-1 text-gray-400">
                    <span class="req-icon">○</span> One special character (!@#$%^&*)
                  </div>
                </div>
              </div>
            </div>

            <div class="text-xs text-gray-600">
              <label class="flex items-start gap-2">
                <input type="checkbox" id="terms-checkbox" required class="mt-1">
                <span>I agree to the <a href="/terms" class="underline">Terms</a> and <a href="/privacy" class="underline">Privacy Policy</a></span>
              </label>
            </div>

            <button type="submit" id="submit-btn" disabled class="w-full rounded-full bg-orange-600 py-3 font-semibold text-white shadow-lg transition hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed">
              Create free account
            </button>
          </form>

          <div class="text-sm text-gray-700">
            Already have an account? 
            <a href="/login" class="font-semibold text-gray-900 underline decoration-gray-400 underline-offset-4">Sign in</a>
            <br/>
            <a href="/" class="text-gray-500 hover:text-gray-900 mt-2 inline-block">← Back to home</a>
          </div>
        </div>

        <!-- Step 2: Email Verification -->
        <div id="verification-step" class="hidden space-y-8">
          <header class="space-y-2">
            <h1 class="text-3xl font-bold">Verify your email</h1>
            <p class="text-sm text-gray-600">
              We've sent a 6-digit verification code to <span id="verification-email" class="font-semibold"></span>
            </p>
          </header>

          <div id="verification-error" class="hidden rounded-xl border border-red-500/40 bg-red-50 px-4 py-3 text-sm text-red-700"></div>
          <div id="verification-success" class="hidden rounded-xl border border-green-500/40 bg-green-50 px-4 py-3 text-sm text-green-700"></div>

          <form id="verification-form" class="space-y-5">
            <div class="space-y-2">
              <label for="otp" class="text-sm font-semibold">Verification code</label>
              <input id="otp" name="otp" type="text" required maxlength="6" pattern="[0-9]{6}" 
                     class="input-field text-center text-2xl tracking-widest font-mono" 
                     placeholder="000000" 
                     inputmode="numeric"
                     autocomplete="one-time-code" />
              <p class="text-xs text-gray-500">Enter the 6-digit code from your email</p>
            </div>

            <button type="submit" id="verify-btn" class="w-full rounded-full bg-orange-600 py-3 font-semibold text-white shadow-lg transition hover:bg-orange-700 disabled:opacity-50">
              Verify Email
            </button>
          </form>

          <div class="text-sm text-gray-600 space-y-2">
            <p>
              Didn't receive the code? 
              <button id="resend-btn" type="button" class="font-semibold text-orange-600 hover:text-orange-700 underline">
                Resend code
              </button>
            </p>
            <p id="resend-timer" class="hidden text-gray-500">
              You can resend in <span id="timer-seconds">60</span> seconds
            </p>
          </div>

          <div class="text-sm text-gray-700">
            <button id="back-to-register" type="button" class="text-gray-500 hover:text-gray-900">
              ← Back to registration
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="/js/register.js?v=20251126d"></script>
<%- include('../partials/footer') %>
